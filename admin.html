<!DOCTYPE html>
<html lang="ro">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Admin Panel - AnimeNexus</title>
    <link rel="stylesheet" href="style.css">
    <style>
        /* Stiluri specifice admin */
        .admin-container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 20px;
        }
        
        .admin-header {
            background: linear-gradient(135deg, #920d0d 0%, #6d0019 100%);
            padding: 20px;
            border-radius: 10px;
            color: white;
            margin-bottom: 30px;
        }
        
        .admin-tabs {
            display: flex;
            gap: 10px;
            margin-bottom: 30px;
            flex-wrap: wrap;
        }
        
        .admin-tab {
            padding: 12px 24px;
            background: #2a2a2a;
            border: none;
            color: #ccc;
            cursor: pointer;
            border-radius: 8px;
            font-size: 16px;
            transition: all 0.3s;
        }
        
        .admin-tab.active {
            background: #920d0d;
            color: white;
        }
        
        .admin-tab:hover {
            background: #3a3a3a;
        }
        
        .admin-section {
            display: none;
            background: #1a1a1a;
            padding: 30px;
            border-radius: 10px;
            margin-bottom: 30px;
            border: 1px solid #333;
        }
        
        .admin-section.active {
            display: block;
            animation: fadeIn 0.3s;
        }
        
        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(10px); }
            to { opacity: 1; transform: translateY(0); }
        }
        
        .form-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 20px;
            margin-bottom: 25px;
        }
        
        .form-group {
            margin-bottom: 20px;
        }
        
        .form-label {
            display: block;
            margin-bottom: 8px;
            font-weight: 600;
            color: #ddd;
        }
        
        .form-input, .form-textarea, .form-select {
            width: 100%;
            padding: 12px 15px;
            background: #2a2a2a;
            border: 2px solid #444;
            border-radius: 6px;
            color: white;
            font-size: 16px;
            transition: border-color 0.3s;
        }
        
        .form-input:focus, .form-textarea:focus, .form-select:focus {
            border-color: #920d0d;
            outline: none;
        }
        
        .form-textarea {
            min-height: 120px;
            resize: vertical;
        }
        
        .btn-admin {
            background: linear-gradient(135deg, #920d0d 0%, #6d0019 100%);
            color: white;
            padding: 14px 32px;
            border: none;
            border-radius: 8px;
            cursor: pointer;
            font-size: 16px;
            font-weight: bold;
            margin: 10px 10px 10px 0;
            display: inline-flex;
            align-items: center;
            gap: 8px;
            transition: transform 0.2s, box-shadow 0.2s;
        }
        
        .btn-admin:hover {
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(146, 13, 13, 0.3);
        }
        
        .btn-admin.secondary {
            background: #2a2a2a;
        }
        
        .btn-admin.secondary:hover {
            background: #3a3a3a;
        }
        
        .status-message {
            padding: 15px;
            border-radius: 8px;
            margin: 15px 0;
            display: none;
            animation: fadeIn 0.3s;
        }
        
        .status-success {
            background: #2e7d32;
            color: white;
            border-left: 5px solid #1b5e20;
        }
        
        .status-error {
            background: #c62828;
            color: white;
            border-left: 5px solid #b71c1c;
        }
        
        .status-info {
            background: #1565c0;
            color: white;
            border-left: 5px solid #0d47a1;
        }
        
        .episode-list {
            margin-top: 20px;
        }
        
        .episode-item {
            background: #2a2a2a;
            padding: 20px;
            margin-bottom: 15px;
            border-radius: 8px;
            display: flex;
            justify-content: space-between;
            align-items: center;
            border-left: 4px solid #920d0d;
        }
        
        .preview-card {
            background: #2a2a2a;
            padding: 25px;
            border-radius: 10px;
            margin-top: 30px;
            border: 1px solid #444;
        }
        
        .preview-title {
            color: #ddd;
            margin-bottom: 15px;
            font-size: 18px;
        }
        
        .instructions {
            background: rgba(41, 98, 255, 0.1);
            padding: 20px;
            border-radius: 8px;
            margin: 20px 0;
            border-left: 4px solid #2962ff;
        }
        
        .instructions h4 {
            color: #2962ff;
            margin-top: 0;
        }
        
        .instructions ol {
            margin: 10px 0;
            padding-left: 20px;
        }
        
        .instructions li {
            margin-bottom: 8px;
            color: #ccc;
        }
        
        .download-box {
            background: rgba(46, 125, 50, 0.1);
            padding: 20px;
            border-radius: 8px;
            margin: 20px 0;
            border: 2px dashed #2e7d32;
            text-align: center;
        }
    </style>
</head>
<body>
    <nav class="navbar">
        <div class="nav-container">
            <div class="nav-brand">
                <img src="logo.png" alt="AnimeNexus" class="logo">
                <span>Admin Panel</span>
            </div>
            <div class="nav-links">
                <a href="/">â† Ãnapoi la Site</a>
                <a href="https://github.com/ExMarius/anime-uke" target="_blank">ğŸ“ GitHub</a>
            </div>
        </div>
    </nav>

    <div class="admin-container">
        <div class="admin-header">
            <h1>ğŸ¬ Admin Panel - AnimeNexus</h1>
            <p>AdaugÄƒ serii È™i episoade. Datele sunt stocate Ã®n <code>data.json</code> pe GitHub.</p>
        </div>

        <!-- TABS -->
        <div class="admin-tabs">
            <button class="admin-tab active" onclick="showTab('add-serie')">â• Serie NouÄƒ</button>
            <button class="admin-tab" onclick="showTab('add-episode')">ğŸ¥ Episod Nou</button>
            <button class="admin-tab" onclick="showTab('manage-series')">ğŸ“‹ Seriile Mele</button>
            <button class="admin-tab" onclick="showTab('export-data')">ğŸ“¥ ExportÄƒ Date</button>
            <button class="admin-tab" onclick="showTab('demo-data')">ğŸ® Date Demo</button>
        </div>

        <!-- ADD SERIE SECTION -->
        <div id="add-serie" class="admin-section active">
            <h2>â• AdaugÄƒ Serie NouÄƒ</h2>
            
            <div class="instructions">
                <h4>â„¹ï¸ Cum funcÈ›ioneazÄƒ:</h4>
                <ol>
                    <li>CompleteazÄƒ formularul</li>
                    <li>Datele se salveazÄƒ Ã®n browser-ul tÄƒu</li>
                    <li>La final, exporti totul ca JSON</li>
                    <li>ÃncÄƒrci JSON-ul pe GitHub</li>
                </ol>
            </div>
            
            <div class="form-grid">
                <div class="form-group">
                    <label class="form-label">ID Serie (unic): *</label>
                    <input type="text" id="serieId" class="form-input" placeholder="one-piece" required>
                    <small style="color: #888; display: block; margin-top: 5px;">Doar litere mici È™i cratime. Ex: one-piece, naruto-shippuden</small>
                </div>
                
                <div class="form-group">
                    <label class="form-label">Titlu Serie: *</label>
                    <input type="text" id="serieTitlu" class="form-input" placeholder="One Piece" required>
                </div>
            </div>
            
            <div class="form-grid">
                <div class="form-group">
                    <label class="form-label">Descriere: *</label>
                    <textarea id="serieDesc" class="form-textarea" rows="4" placeholder="Descrierea completÄƒ a seriei..." required></textarea>
                </div>
                
                <div class="form-group">
                    <label class="form-label">Genuri (separate cu virgulÄƒ): *</label>
                    <input type="text" id="serieGenuri" class="form-input" placeholder="AventurÄƒ, AcÈ›iune, Shounen, Comedie" required>
                    <small style="color: #888;">Ex: AventurÄƒ, AcÈ›iune, Shounen</small>
                </div>
            </div>
            
            <div class="form-grid">
                <div class="form-group">
                    <label class="form-label">URL Imagine: *</label>
                    <input type="text" id="serieImagine" class="form-input" placeholder="https://i.imgur.com/..." required>
                    <small style="color: #888;">Recomandat: Imagine 300x450px de pe Imgur</small>
                </div>
                
                <div class="form-group">
                    <label class="form-label">ÈšarÄƒ de origine:</label>
                    <input type="text" id="serieTara" class="form-input" placeholder="Japonia" value="Japonia">
                </div>
            </div>
            
            <button class="btn-admin" onclick="addSerie()">ğŸ’¾ SalveazÄƒ Serie</button>
            <button class="btn-admin secondary" onclick="clearSerieForm()">ğŸ—‘ï¸ CurÄƒÈ›Äƒ Formular</button>
            
            <div id="serieStatus" class="status-message"></div>
            
            <!-- PREVIEW -->
            <div class="preview-card">
                <div class="preview-title">ğŸ‘ï¸ Preview Serie:</div>
                <div id="seriePreview" style="display: flex; gap: 20px; align-items: center;">
                    <div id="previewImage" style="width: 100px; height: 150px; background: #333; border-radius: 5px;"></div>
                    <div>
                        <h3 id="previewTitle" style="margin: 0 0 10px 0; color: white;">Titlu serie</h3>
                        <p id="previewDesc" style="color: #aaa; margin: 0;">Descrierea va apÄƒrea aici...</p>
                    </div>
                </div>
            </div>
        </div>

        <!-- ADD EPISODE SECTION -->
        <div id="add-episode" class="admin-section">
            <h2>ğŸ¥ AdaugÄƒ Episod Nou</h2>
            
            <div class="form-grid">
                <div class="form-group">
                    <label class="form-label">SelecteazÄƒ Serie: *</label>
                    <select id="selectSerie" class="form-select" onchange="loadSerieInfo()">
                        <option value="">Alege o serie...</option>
                    </select>
                    <small style="color: #888;">Seriile sunt Ã®ncÄƒrcate din data.json</small>
                </div>
                
                <div class="form-group">
                    <label class="form-label">NumÄƒr Episod: *</label>
                    <input type="number" id="episodeNumber" class="form-input" min="1" required>
                </div>
            </div>
            
            <div class="form-grid">
                <div class="form-group">
                    <label class="form-label">Titlu Episod: *</label>
                    <input type="text" id="episodeTitlu" class="form-input" placeholder="Titlul episodului..." required>
                </div>
                
                <div class="form-group">
                    <label class="form-label">Link FileMoon: *</label>
                    <input type="text" id="episodeFilemoon" class="form-input" placeholder="https://filemoon.to/e/..." required>
                </div>
            </div>
            
            <div class="form-grid">
                <div class="form-group">
                    <label class="form-label">Descriere Episod (opÈ›ional):</label>
                    <textarea id="episodeDesc" class="form-textarea" rows="3" placeholder="Ce se Ã®ntÃ¢mplÄƒ Ã®n acest episod..."></textarea>
                </div>
                
                <div class="form-grid">
                    <div class="form-group">
                        <label class="form-label">DuratÄƒ (minute):</label>
                        <input type="number" id="episodeDurata" class="form-input" min="1" value="24">
                    </div>
                    
                    <div class="form-group">
                        <label class="form-label">VizionÄƒri iniÈ›iale:</label>
                        <input type="number" id="episodeVizionari" class="form-input" min="0" value="0">
                    </div>
                </div>
            </div>
            
            <button class="btn-admin" onclick="addEpisode()">ğŸ¬ AdaugÄƒ Episod</button>
            <button class="btn-admin secondary" onclick="clearEpisodeForm()">ğŸ—‘ï¸ CurÄƒÈ›Äƒ Formular</button>
            
            <div id="episodeStatus" class="status-message"></div>
        </div>

        <!-- MANAGE SERIES SECTION -->
        <div id="manage-series" class="admin-section">
            <h2>ğŸ“‹ Seriile Tale</h2>
            <p>Serii salvate local Ã®n browser-ul tÄƒu:</p>
            
            <div id="seriesList" class="episode-list">
                <!-- Se Ã®ncarcÄƒ din JavaScript -->
                <div class="loading">Se Ã®ncarcÄƒ seriile...</div>
            </div>
        </div>

        <!-- EXPORT DATA SECTION -->
        <div id="export-data" class="admin-section">
            <h2>ğŸ“¥ ExportÄƒ Datele</h2>
            
            <div class="instructions">
                <h4>ğŸ“‹ PaÈ™i pentru a publica pe site:</h4>
                <ol>
                    <li>AdaugÄƒ toate seriile È™i episoadele Ã®n admin</li>
                    <li>Click pe butonul "ExportÄƒ JSON" de mai jos</li>
                    <li>DescarcÄƒ fiÈ™ierul <code>data.json</code></li>
                    <li>Mergi pe <a href="https://github.com/ExMarius/anime-uke" target="_blank" style="color: #2962ff;">GitHub repository</a></li>
                    <li>ÃncarcÄƒ noul fiÈ™ier peste cel vechi</li>
                    <li>Cloudflare se va rebuild automat Ã®n 1-2 minute</li>
                    <li>Site-ul tÄƒu va afiÈ™a noile serii!</li>
                </ol>
            </div>
            
            <div class="download-box">
                <h3>ğŸ“„ FiÈ™ierul tÄƒu data.json</h3>
                <p>ConÈ›ine toate seriile È™i episoadele adÄƒugate.</p>
                <textarea id="jsonOutput" style="width: 100%; height: 300px; background: #1a1a1a; color: white; padding: 15px; border-radius: 5px; border: 1px solid #444; font-family: monospace; margin: 15px 0;"></textarea>
                
                <div>
                    <button class="btn-admin" onclick="exportJSON()">ğŸ’¾ ExportÄƒ JSON</button>
                    <button class="btn-admin secondary" onclick="copyToClipboard()">ğŸ“‹ CopiazÄƒ Text</button>
                    <button class="btn-admin secondary" onclick="loadLocalData()">ğŸ”„ ReÃ®ncarcÄƒ Datele</button>
                </div>
                
                <div id="exportStatus" class="status-message" style="margin-top: 15px;"></div>
            </div>
            
            <div class="instructions" style="margin-top: 30px;">
                <h4>ğŸ”— Link direct cÄƒtre data.json:</h4>
                <p><a href="https://raw.githubusercontent.com/ExMarius/anime-uke/main/data.json" target="_blank" style="color: #4CAF50; word-break: break-all;">
                    https://raw.githubusercontent.com/ExMarius/anime-uke/main/data.json
                </a></p>
            </div>
        </div>

        <!-- DEMO DATA SECTION -->
        <div id="demo-data" class="admin-section">
            <h2>ğŸ® Date Demo</h2>
            
            <div class="instructions">
                <h4>ğŸš€ IniÈ›ializeazÄƒ cu date demo</h4>
                <p>AdaugÄƒ automat serii È™i episoade demo pentru testare.</p>
            </div>
            
            <button class="btn-admin" onclick="addDemoData()">â• AdaugÄƒ Date Demo</button>
            <button class="btn-admin secondary" onclick="clearAllData()">ğŸ—‘ï¸ È˜terge Toate Datele</button>
            
            <div id="demoStatus" class="status-message"></div>
            
            <div class="preview-card" style="margin-top: 30px;">
                <div class="preview-title">ğŸ“Š Ce conÈ›in datele demo:</div>
                <ul style="color: #ccc; line-height: 1.6;">
                    <li><strong>One Piece</strong> - 1 episod demo</li>
                    <li><strong>Look Plus One Piece Special</strong> - 1 episod demo</li>
                    <li><strong>Demon Slayer</strong> - 2 episoade demo</li>
                    <li><strong>Jujutsu Kaisen</strong> - 1 episod demo</li>
                    <li>Total: <strong>4 serii</strong> cu <strong>5 episoade</strong></li>
                </ul>
            </div>
        </div>
    </div>

    <!-- SCRIPTS -->
    <script src="app.js"></script>
    <script>
        // ====== VARIABILE GLOBALE ======
        let localSeries = JSON.parse(localStorage.getItem('anime_admin_data') || '[]');
        
        // ====== FUNCÈšII UTILITARE ======
        function showTab(tabId) {
            // Ascunde toate tab-urile
            document.querySelectorAll('.admin-section').forEach(section => {
                section.classList.remove('active');
            });
            document.querySelectorAll('.admin-tab').forEach(tab => {
                tab.classList.remove('active');
            });
            
            // AratÄƒ tab-ul selectat
            document.getElementById(tabId).classList.add('active');
            event.currentTarget.classList.add('active');
            
            // DacÄƒ e tab-ul de export, reÃ®ncarcÄƒ datele
            if (tabId === 'export-data') {
                loadLocalData();
            }
            
            // DacÄƒ e tab-ul de manage, reÃ®ncarcÄƒ lista
            if (tabId === 'manage-series') {
                loadSeriesList();
            }
        }
        
        function showStatus(elementId, message, type = 'info') {
            const element = document.getElementById(elementId);
            element.textContent = message;
            element.className = `status-message status-${type}`;
            element.style.display = 'block';
            
            // Ascunde dupÄƒ 5 secunde
            setTimeout(() => {
                element.style.display = 'none';
            }, 5000);
        }
        
        // ====== FUNCÈšII PENTRU SERII ======
        function addSerie() {
            // ColecteazÄƒ datele
            const serieData = {
                id: document.getElementById('serieId').value.trim().toLowerCase(),
                titlu: document.getElementById('serieTitlu').value.trim(),
                descriere: document.getElementById('serieDesc').value.trim(),
                genuri: document.getElementById('serieGenuri').value.split(',').map(g => g.trim()).filter(g => g),
                imagine: document.getElementById('serieImagine').value.trim(),
                tara: document.getElementById('serieTara').value.trim() || 'Japonia',
                data_creare: new Date().toISOString().split('T')[0],
                episoade: [],
                vizionari_totale: 0
            };
            
            // Validare
            if (!serieData.id || !serieData.titlu || !serieData.descriere || !serieData.imagine) {
                showStatus('serieStatus', 'âŒ CompleteazÄƒ toate cÃ¢mpurile obligatorii!', 'error');
                return;
            }
            
            // VerificÄƒ dacÄƒ existÄƒ deja
            if (localSeries.some(s => s.id === serieData.id)) {
                showStatus('serieStatus', 'âŒ ExistÄƒ deja o serie cu acest ID!', 'error');
                return;
            }
            
            // AdaugÄƒ la lista localÄƒ
            localSeries.push(serieData);
            localStorage.setItem('anime_admin_data', JSON.stringify(localSeries));
            
            // AfiÈ™eazÄƒ mesaj de succes
            showStatus('serieStatus', `âœ… Serie "${serieData.titlu}" adÄƒugatÄƒ cu succes!`, 'success');
            
            // ActualizeazÄƒ dropdown-ul de serii
            updateSerieDropdown();
            
            // CurÄƒÈ›Äƒ formularul
            setTimeout(() => {
                clearSerieForm();
            }, 1000);
        }
        
        function clearSerieForm() {
            document.getElementById('serieId').value = '';
            document.getElementById('serieTitlu').value = '';
            document.getElementById('serieDesc').value = '';
            document.getElementById('serieGenuri').value = '';
            document.getElementById('serieImagine').value = '';
            document.getElementById('serieTara').value = 'Japonia';
            showStatus('serieStatus', 'ğŸ—‘ï¸ Formular curÄƒÈ›at', 'info');
        }
        
        // ====== FUNCÈšII PENTRU EPISOADE ======
        function updateSerieDropdown() {
            const select = document.getElementById('selectSerie');
            select.innerHTML = '<option value="">Alege o serie...</option>' +
                localSeries.map(s => 
                    `<option value="${s.id}">${s.titlu} (${s.episoade?.length || 0} episoade)</option>`
                ).join('');
        }
        
        function loadSerieInfo() {
            const serieId = document.getElementById('selectSerie').value;
            const serie = localSeries.find(s => s.id === serieId);
            
            if (serie) {
                // SeteazÄƒ urmÄƒtorul numÄƒr de episod
                const nextEpNumber = (serie.episoade?.length || 0) + 1;
                document.getElementById('episodeNumber').value = nextEpNumber;
            }
        }
        
        function addEpisode() {
            const serieId = document.getElementById('selectSerie').value;
            const episodeData = {
                numar: parseInt(document.getElementById('episodeNumber').value),
                titlu: document.getElementById('episodeTitlu').value.trim(),
                filemoon: document.getElementById('episodeFilemoon').value.trim(),
                descriere: document.getElementById('episodeDesc').value.trim(),
                durata: parseInt(document.getElementById('episodeDurata').value) || 24,
                vizionari: parseInt(document.getElementById('episodeVizionari').value) || 0,
                data_adaugare: new Date().toISOString().split('T')[0]
            };
            
            // Validare
            if (!serieId || !episodeData.numar || !episodeData.titlu || !episodeData.filemoon) {
                showStatus('episodeStatus', 'âŒ CompleteazÄƒ toate cÃ¢mpurile obligatorii!', 'error');
                return;
            }
            
            // GÄƒseÈ™te seria
            const serieIndex = localSeries.findIndex(s => s.id === serieId);
            if (serieIndex === -1) {
                showStatus('episodeStatus', 'âŒ Serie negÄƒsitÄƒ!', 'error');
                return;
            }
            
            // VerificÄƒ dacÄƒ episodul existÄƒ
            if (localSeries[serieIndex].episoade?.some(ep => ep.numar === episodeData.numar)) {
                showStatus('episodeStatus', `âŒ Episodul ${episodeData.numar} existÄƒ deja!`, 'error');
                return;
            }
            
            // IniÈ›ializeazÄƒ array-ul de episoade dacÄƒ nu existÄƒ
            if (!localSeries[serieIndex].episoade) {
                localSeries[serieIndex].episoade = [];
            }
            
            // AdaugÄƒ episodul
            localSeries[serieIndex].episoade.push(episodeData);
            
            // SorteazÄƒ episoadele dupÄƒ numÄƒr
            localSeries[serieIndex].episoade.sort((a, b) => a.numar - b.numar);
            
            // SalveazÄƒ
            localStorage.setItem('anime_admin_data', JSON.stringify(localSeries));
            
            // Mesaj de succes
            const serieName = localSeries[serieIndex].titlu;
            showStatus('episodeStatus', `âœ… Episod ${episodeData.numar} adÄƒugat la "${serieName}"!`, 'success');
            
            // CurÄƒÈ›Äƒ formularul
            setTimeout(() => {
                clearEpisodeForm();
                // ActualizeazÄƒ numÄƒrul urmÄƒtor
                const nextEpNumber = (localSeries[serieIndex].episoade?.length || 0) + 1;
                document.getElementById('episodeNumber').value = nextEpNumber;
            }, 1000);
        }
        
        function clearEpisodeForm() {
            document.getElementById('episodeTitlu').value = '';
            document.getElementById('episodeFilemoon').value = '';
            document.getElementById('episodeDesc').value = '';
            document.getElementById('episodeDurata').value = '24';
            document.getElementById('episodeVizionari').value = '0';
            showStatus('episodeStatus', 'ğŸ—‘ï¸ Formular curÄƒÈ›at', 'info');
        }
        
        // ====== FUNCÈšII PENTRU MANAGING SERIES ======
        function loadSeriesList() {
            const container = document.getElementById('seriesList');
            
            if (localSeries.length === 0) {
                container.innerHTML = '<p>Nu ai serii adÄƒugate Ã®ncÄƒ.</p>';
                return;
            }
            
            container.innerHTML = '';
            localSeries.forEach(serie => {
                const epCount = serie.episoade?.length || 0;
                container.innerHTML += `
                    <div class="episode-item">
                        <div>
                            <h4>${serie.titlu}</h4>
                            <small>ID: ${serie.id} | ${epCount} episoade | AdÄƒugatÄƒ: ${serie.data_creare}</small>
                            <div style="margin-top: 8px;">
                                ${serie.genuri?.map(g => `<span class="genre">${g}</span>`).join('')}
                            </div>
                        </div>
                        <div style="display: flex; gap: 10px;">
                            <button onclick="editSerie('${serie.id}')" class="btn-admin secondary" style="padding: 8px 16px;">âœï¸ Edit</button>
                            <button onclick="deleteSerie('${serie.id}')" class="btn-admin secondary" style="padding: 8px 16px; background: #c62828;">ğŸ—‘ï¸ È˜terge</button>
                        </div>
                    </div>
                `;
            });
        }
        
        function deleteSerie(serieId) {
            if (!confirm(`Sigur vrei sÄƒ È™tergi aceastÄƒ serie È™i toate episoadele ei?`)) {
                return;
            }
            
            localSeries = localSeries.filter(s => s.id !== serieId);
            localStorage.setItem('anime_admin_data', JSON.stringify(localSeries));
            
            showStatus('serieStatus', 'âœ… Serie È™tearsÄƒ cu succes!', 'success');
            loadSeriesList();
            updateSerieDropdown();
        }
        
        // ====== FUNCÈšII PENTRU EXPORT ======
        function loadLocalData() {
            const output = document.getElementById('jsonOutput');
            output.value = JSON.stringify(localSeries, null, 2);
        }
        
        function exportJSON() {
            const dataStr = JSON.stringify(localSeries, null, 2);
            const blob = new Blob([dataStr], { type: 'application/json' });
            const url = URL.createObjectURL(blob);
            
            const a = document.createElement('a');
            a.href = url;
            a.download = 'data.json';
            document.body.appendChild(a);
            a.click();
            document.body.removeChild(a);
            
            showStatus('exportStatus', 'âœ… FiÈ™ierul data.json a fost descÄƒrcat!', 'success');
        }
        
        function copyToClipboard() {
            const output = document.getElementById('jsonOutput');
            output.select();
            document.execCommand('copy');
            
            showStatus('exportStatus', 'âœ… JSON copiat Ã®n clipboard!', 'success');
        }
        
        // ====== FUNCÈšII PENTRU DEMO DATA ======
        function addDemoData() {
            const demoSeries = [
                {
                    id: "one-piece",
                    titlu: "One Piece",
                    descriere: "Povestea lui Monkey D. Luffy È™i a echipajului sÄƒu de piraÈ›i Ã®n cÄƒutarea celui mai mare comoarÄƒ din lume, One Piece.",
                    genuri: ["AventurÄƒ", "AcÈ›iune", "Shounen", "Fantastic"],
                    imagine: "https://i.imgur.com/one-piece.jpg",
                    tara: "Japonia",
                    data_creare: new Date().toISOString().split('T')[0],
                    episoade: [
                        {
                            numar: 1,
                            titlu: "Eu sunt Luffy! Omul care va deveni Regele PiraÈ›ilor!",
                            filemoon: "https://filemoon.to/e/qx8ixv2merzt/One_Piece_-_0001__480p_RoSub___Shinobi_ACG_.mp4",
                            descriere: "Primul episod din One Piece",
                            durata: 24,
                            data_adaugare: new Date().toISOString().split('T')[0],
                            vizionari: 91235
                        }
                    ],
                    vizionari_totale: 91235
                },
                {
                    id: "look-plus-one-piece",
                    titlu: "Look Plus One Piece Special Movie",
                    descriere: "O colaborare cu One Piece pentru produsele de curÄƒÈ›are marca Lions â€Look Plusâ€.",
                    genuri: ["Comedie", "Shounen"],
                    imagine: "https://i.imgur.com/tKnzRWrl.png",
                    tara: "Japonia",
                    data_creare: new Date().toISOString().split('T')[0],
                    episoade: [
                        {
                            numar: 1,
                            titlu: "Look Plus x One Piece",
                            filemoon: "https://filemoon.to/e/example1",
                            descriere: "Episod special de colaborare",
                            durata: 2,
                            data_adaugare: new Date().toISOString().split('T')[0],
                            vizionari: 1500
                        }
                    ],
                    vizionari_totale: 1500
                },
                {
                    id: "demon-slayer",
                    titlu: "Demon Slayer: Kimetsu no Yaiba",
                    descriere: "Tanjiro Kamado devine un vÃ¢nÄƒtor de demoni dupÄƒ ce familia lui este ucisÄƒ È™i sora lui se transformÄƒ Ã®ntr-un demon.",
                    genuri: ["AcÈ›iune", "Fantezie", "Shounen"],
                    imagine: "https://i.imgur.com/demon-slayer.jpg",
                    tara: "Japonia",
                    data_creare: new Date().toISOString().split('T')[0],
                    episoade: [
                        {
                            numar: 1,
                            titlu: "Crusher of Fate",
                            filemoon: "https://filemoon.to/e/example2",
                            descriere: "Primul episod din Demon Slayer",
                            durata: 24,
                            data_adaugare: new Date().toISOString().split('T')[0],
                            vizionari: 75000
                        },
                        {
                            numar: 2,
                            titlu: "Trainer Sakonji Urokodaki",
                            filemoon: "https://filemoon.to/e/example3",
                            descriere: "Al doilea episod",
                            durata: 24,
                            data_adaugare: new Date().toISOString().split('T')[0],
                            vizionari: 68000
                        }
                    ],
                    vizionari_totale: 143000
                },
                {
                    id: "jujutsu-kaisen",
                    titlu: "Jujutsu Kaisen",
                    descriere: "Yuji Itadori devine gazda unei blestemate puternice È™i se alÄƒturÄƒ unei organizaÈ›ii secrete de vrÄƒjitori.",
                    genuri: ["AcÈ›iune", "Fantezie Ã®ntunecatÄƒ", "Shounen"],
                    imagine: "https://i.imgur.com/jujutsu-kaisen.jpg",
                    tara: "Japonia",
                    data_creare: new Date().toISOString().split('T')[0],
                    episoade: [
                        {
                            numar: 1,
                            titlu: "Ryomen Sukuna",
                            filemoon: "https://filemoon.to/e/example4",
                            descriere: "Primul episod din Jujutsu Kaisen",
                            durata: 24,
                            data_adaugare: new Date().toISOString().split('T')[0],
                            vizionari: 82000
                        }
                    ],
                    vizionari_totale: 82000
                }
            ];
            
            // AdaugÄƒ seriile demo (dacÄƒ nu existÄƒ deja)
            demoSeries.forEach(demoSerie => {
                if (!localSeries.some(s => s.id === demoSerie.id)) {
                    localSeries.push(demoSerie);
                }
            });
            
            localStorage.setItem('anime_admin_data', JSON.stringify(localSeries));
            
            showStatus('demoStatus', `âœ… ${demoSeries.length} serii demo adÄƒugate!`, 'success');
            
            // ReÃ®ncarcÄƒ listele
            updateSerieDropdown();
            loadSeriesList();
            loadLocalData();
        }
        
        function clearAllData() {
            if (!confirm('Sigur vrei sÄƒ È™tergi TOATE datele din browser?')) {
                return;
            }
            
            localSeries = [];
            localStorage.removeItem('anime_admin_data');
            
            showStatus('demoStatus', 'âœ… Toate datele au fost È™terse!', 'success');
            
            // ReÃ®ncarcÄƒ listele
            updateSerieDropdown();
            loadSeriesList();
            loadLocalData();
        }
        
        // ====== INITIALIZE ======
        document.addEventListener('DOMContentLoaded', function() {
            // ÃncarcÄƒ seriile pentru dropdown
            updateSerieDropdown();
            
            // ÃncarcÄƒ datele pentru export
            loadLocalData();
            
            // ÃncarcÄƒ lista de serii
            loadSeriesList();
            
            // Preview live pentru formularul de serie
            const formInputs = ['serieId', 'serieTitlu', 'serieDesc', 'serieImagine'];
            formInputs.forEach(id => {
                const input = document.getElementById(id);
                if (input) {
                    input.addEventListener('input', updatePreview);
                }
            });
            
            // ÃncarcÄƒ È™i datele de pe GitHub (pentru comparaÈ›ie)
            loadData().then(githubSeries => {
                console.log('Date de pe GitHub:', githubSeries.length, 'serii');
            });
        });
        
        function updatePreview() {
            const title = document.getElementById('serieTitlu').value || 'Titlu serie';
            const desc = document.getElementById('serieDesc').value || 'Descrierea va apÄƒrea aici...';
            const image = document.getElementById('serieImagine').value;
            
            document.getElementById('previewTitle').textContent = title;
            document.getElementById('previewDesc').textContent = desc.substring(0, 100) + (desc.length > 100 ? '...' : '');
            
            if (image) {
                document.getElementById('previewImage').style.backgroundImage = `url('${image}')`;
                document.getElementById('previewImage').style.backgroundSize = 'cover';
                document.getElementById('previewImage').style.backgroundPosition = 'center';
            }
        }
    </script>
</body>
</html>
