<!DOCTYPE html>
<html lang="ro">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Setări - Anime Uke</title>
    
    <!-- Bootstrap CSS -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
    <!-- Font Awesome -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <!-- Anime Uke CSS -->
    <link rel="stylesheet" href="style.css">
</head>
<body>
    <!-- Navbar -->
    <nav class="navbar navbar-dark bg-dark-red">
        <div class="container">
            <a class="navbar-brand" href="index.html">
                <i class="fas fa-ghost"></i> <strong>ANIME UKE</strong>
            </a>
            <div id="userNavItem"></div>
        </div>
    </nav>

    <!-- Settings Content -->
    <div class="container py-4">
        <h1 class="mb-4"><i class="fas fa-cogs"></i> Setări Cont</h1>
        
        <div class="row">
            <div class="col-md-3">
                <!-- Settings Menu -->
                <div class="list-group">
                    <a href="#profile" class="list-group-item list-group-item-action active" 
                       data-bs-toggle="list">
                        <i class="fas fa-user"></i> Profil
                    </a>
                    <a href="#security" class="list-group-item list-group-item-action" 
                       data-bs-toggle="list">
                        <i class="fas fa-lock"></i> Securitate
                    </a>
                    <a href="#notifications" class="list-group-item list-group-item-action" 
                       data-bs-toggle="list">
                        <i class="fas fa-bell"></i> Notificări
                    </a>
                    <a href="profile.html" class="list-group-item list-group-item-action">
                        <i class="fas fa-arrow-left"></i> Înapoi la Profil
                    </a>
                </div>
            </div>
            
            <div class="col-md-9">
                <!-- Tab Content -->
                <div class="tab-content">
                    <!-- Profile Tab -->
                    <div class="tab-pane fade show active" id="profile">
                        <div class="card">
                            <div class="card-header bg-dark">
                                <h4 class="mb-0"><i class="fas fa-user-edit"></i> Editare Profil</h4>
                            </div>
                            <div class="card-body">
                                <form id="profileForm">
                                    <div class="mb-3">
                                        <label for="settingsUsername" class="form-label">Username</label>
                                        <input type="text" class="form-control" id="settingsUsername" 
                                               value="Loading..." readonly>
                                        <small class="text-muted">Username-ul nu poate fi schimbat</small>
                                    </div>
                                    <div class="mb-3">
                                        <label for="settingsEmail" class="form-label">Email</label>
                                        <input type="email" class="form-control" id="settingsEmail" 
                                               value="Loading...">
                                    </div>
                                    <button type="submit" class="btn btn-danger">
                                        <i class="fas fa-save"></i> Salvează Modificări
                                    </button>
                                </form>
                            </div>
                        </div>
                    </div>
                    
                    <!-- Security Tab -->
                    <div class="tab-pane fade" id="security">
                        <div class="card">
                            <div class="card-header bg-dark">
                                <h4 class="mb-0"><i class="fas fa-shield-alt"></i> Securitate</h4>
                            </div>
                            <div class="card-body">
                                <form id="passwordForm">
                                    <div class="mb-3">
                                        <label for="currentPassword" class="form-label">Parola Curentă</label>
                                        <input type="password" class="form-control" id="currentPassword" required>
                                    </div>
                                    <div class="mb-3">
                                        <label for="newPassword" class="form-label">Parola Nouă</label>
                                        <input type="password" class="form-control" id="newPassword" required>
                                    </div>
                                    <div class="mb-3">
                                        <label for="confirmPassword" class="form-label">Confirmă Parola Nouă</label>
                                        <input type="password" class="form-control" id="confirmPassword" required>
                                    </div>
                                    <button type="submit" class="btn btn-danger">
                                        <i class="fas fa-key"></i> Schimbă Parola
                                    </button>
                                </form>
                            </div>
                        </div>
                    </div>
                    
                    <!-- Notifications Tab -->
                    <div class="tab-pane fade" id="notifications">
                        <div class="card">
                            <div class="card-header bg-dark">
                                <h4 class="mb-0"><i class="fas fa-bell"></i> Setări Notificări</h4>
                            </div>
                            <div class="card-body">
                                <div class="form-check form-switch mb-3">
                                    <input class="form-check-input" type="checkbox" id="notifEmail" checked>
                                    <label class="form-check-label" for="notifEmail">
                                        Notificări prin Email
                                    </label>
                                </div>
                                <div class="form-check form-switch mb-3">
                                    <input class="form-check-input" type="checkbox" id="notifNewEpisodes" checked>
                                    <label class="form-check-label" for="notifNewEpisodes">
                                        Notificări pentru episoade noi
                                    </label>
                                </div>
                                <div class="form-check form-switch mb-3">
                                    <input class="form-check-input" type="checkbox" id="notifNews" checked>
                                    <label class="form-check-label" for="notifNews">
                                        Noutăți și anunțuri
                                    </label>
                                </div>
                                <button class="btn btn-danger" onclick="saveNotifications()">
                                    <i class="fas fa-save"></i> Salvează Preferințe
                                </button>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Scripts -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
    <script src="config.js"></script>
    <script src="script.js"></script>
    
    <script>
        document.addEventListener('DOMContentLoaded', function() {
            console.log('⚙️ Settings page loaded');
            
            // Verifică login
            if (!requireLogin()) {
                return;
            }
            
            const user = getCurrentUser();
            
            // Populează formularul
            document.getElementById('settingsUsername').value = user.username;
            document.getElementById('settingsEmail').value = 
                user.email || `${user.username}@animeuke.com`;
            
            // Update navbar
            updateUIBasedOnLogin();
            
            // Handle profile form
            document.getElementById('profileForm').addEventListener('submit', function(e) {
                e.preventDefault();
                alert('Funcția de salvare profil va fi implementată în curând!');
            });
            
            // Handle password form
            document.getElementById('passwordForm').addEventListener('submit', function(e) {
                e.preventDefault();
                
                const currentPass = document.getElementById('currentPassword').value;
                const newPass = document.getElementById('newPassword').value;
                const confirmPass = document.getElementById('confirmPassword').value;
                
                if (newPass !== confirmPass) {
                    alert('Parolele nu coincid!');
                    return;
                }
                
                if (newPass.length < 6) {
                    alert('Parola trebuie să aibă cel puțin 6 caractere!');
                    return;
                }
                
                alert('Funcția de schimbare parolă va fi implementată în curând!');
                document.getElementById('passwordForm').reset();
            });
            
            // Load saved notification preferences
            const savedPrefs = JSON.parse(localStorage.getItem('notificationPrefs') || '{}');
            document.getElementById('notifEmail').checked = savedPrefs.email !== false;
            document.getElementById('notifNewEpisodes').checked = savedPrefs.episodes !== false;
            document.getElementById('notifNews').checked = savedPrefs.news !== false;
        });
        
        // Save notification preferences
        function saveNotifications() {
            const prefs = {
                email: document.getElementById('notifEmail').checked,
                episodes: document.getElementById('notifNewEpisodes').checked,
                news: document.getElementById('notifNews').checked
            };
            
            localStorage.setItem('notificationPrefs', JSON.stringify(prefs));
            alert('Preferințele au fost salvate!');
        }
    </script>
</body>
</html>
